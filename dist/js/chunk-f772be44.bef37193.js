(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f772be44"],{"0a97":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chat"},[o("div",{staticClass:"chat-container"},[o("room-list",{attrs:{viewingRoomId:e.viewingRoomId},on:{enterRoom:e.enterRoom}}),o("div",{staticClass:"roomlist-drag-drop",style:{left:e.roomListWidth-2+"px"},on:{mousedown:e.dragBegin}}),e.showLinkRoom?o("join-room",{on:{enterRoom:e.enterRoom,hideLingRoom:function(t){e.showLinkRoom=!1}}}):o("viewing-room",{ref:"viewingRoom",attrs:{viewingRoomId:e.viewingRoomId},on:{quitRoom:function(t){e.viewingRoomId=null}}})],1)])},i=[],r=(o("1c01"),o("58b2"),o("8e6e"),o("f3e2"),o("d25f"),o("ac6a"),o("456d"),o("bd86")),s=(o("7514"),o("96cf"),o("3b8d")),m=(o("e047"),o("2f62"));o("a9e1");function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(o,!0).forEach((function(t){Object(r["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var a=function(){return o.e("chunk-905ac396").then(o.bind(null,"ffaf"))},d=function(){return o.e("chunk-685220ca").then(o.bind(null,"f76d"))},h=function(){return o.e("chunk-0b631430").then(o.bind(null,"3ea7"))},f={beforeRouteEnter:function(e,t,o){o()},components:{"room-list":a,"viewing-room":d,"join-room":h},created:function(){},data:function(){return{viewingRoomId:"",showLinkRoom:!1,timer:null,mouseMoveX:0}},mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,o,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){n.$store.commit("setShowLoadingMask",!1),n.$store.commit("setAfterlog",!1)}),500),console.log(this.$router),Notification.requestPermission(),t=function(){var e=n.$store.state.roomList.find((function(e){return e.roomId===n.chatRoom}));e?n.enterRoom(e):n.showLinkRoom=!0},this.chatRoom&&(this.roomsInited?t():o=setInterval((function(){n.roomsInited&&(t(),clearInterval(o))}),500));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{dragBegin:function(){console.log("dragBegin"),this.$store.commit("setRoomListDraging",!0),document.addEventListener("mousemove",this.documentMove),document.addEventListener("mouseup",this.dragEnd)},dragEnd:function(){console.log("dragEnd"),this.$store.commit("setRoomListDraging",!1),document.removeEventListener("mousemove",this.documentMove),document.removeEventListener("mouseup",this.dragEnd)},documentMove:function(e){var t=this;0!==e.movementX&&(this.mouseMoveX+=e.movementX,this.timer||(this.timer=setTimeout((function(){t.$store.commit("setRoomListWidth",t.roomListWidth+t.mouseMoveX),clearTimeout(t.timer),t.timer=null,t.mouseMoveX=0}),16)))},afterEnterRoom:function(){var e=this;setTimeout(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.viewingRoom.computeUnread();case 2:e.$refs.viewingRoom.scrollToBottom();case 3:case"end":return t.stop()}}),t)}))),0)},enterRoom:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var o,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.viewingRoom&&this.$refs.viewingRoom.saveEditingMsg(),o=this.viewingRoomId===t.roomId,!o){e.next=4;break}return e.abrupt("return");case 4:return this.showLinkRoom=!1,e.next=7,window.matrix.viewingRoom.addViewingRoom(t.roomId);case 7:this.viewingRoomId=t.roomId,this.hasOldTimelineTable[this.viewingRoomId]=null,this.afterEnterRoom(),this.$nextTick((function(){n.$refs.viewingRoom&&n.$refs.viewingRoom.clearEditingMsg()}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),whetherSameRoom:function(e){return e===this.viewingRoomId}},computed:u({},Object(m["b"])(["showRoomList","windowHeight","windowWidth","userList","myinfo","hasOldTimelineTable","chatRoom","roomsInited","roomListWidth"])),watch:{}},l=f,v=(o("46d9"),o("2877")),g=Object(v["a"])(l,n,i,!1,null,null,null);t["default"]=g.exports},"46d9":function(e,t,o){"use strict";var n=o("7013"),i=o.n(n);i.a},7013:function(e,t,o){}}]);